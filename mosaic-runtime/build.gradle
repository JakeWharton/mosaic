import org.jetbrains.kotlin.gradle.plugin.KotlinPlatformType

apply plugin: 'org.jetbrains.kotlin.multiplatform'
apply from: "$rootDir/addAllTargets.gradle"
apply plugin: 'com.vanniktech.maven.publish'
apply plugin: 'org.jetbrains.dokka'
apply plugin: 'com.jakewharton.mosaic'

kotlin {
	sourceSets {
		commonMain {
			dependencies {
				api libs.jetbrains.compose.runtime
				api libs.kotlinx.coroutines.core
				implementation libs.codepoints
			}
		}
		commonTest {
			dependencies {
				implementation libs.kotlin.test
			}
		}

		jvmMain {
			dependencies {
				implementation libs.jansi
			}
		}
		nonJvmMain {
			dependsOn(commonMain)
		}
	}

	targets.each { target ->
		if (target.platformType != KotlinPlatformType.jvm) {
			target.compilations.main.source(sourceSets.nonJvmMain)
		}
	}
}
